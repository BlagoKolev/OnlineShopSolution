@page "/"
@inherits ProductsBase

@if (Products == null)
{
    <h3>Loading products...</h3>
}
else
{
    <h3 class="mb-5">Products</h3>
    var productCount = Products.Count();
    if (productCount > 0)
    {

        var groupedProductsByCategory = from product in Products
                                        group product by product.CategoryId into categoryGroup
                                        orderby categoryGroup.Key
                                        select categoryGroup;

        foreach (var category in groupedProductsByCategory)
        {
            <h4>@category.FirstOrDefault(x=>x.CategoryId == @category.Key).CategoryName</h4>
            <div class="row mt-3">
                <DisplayProducts Products="@category"></DisplayProducts>
            </div>
            <hr class="mb-3" />
        }
    }
}
